<views:BaseView
    x:Class="GrooveSharkWindowsPhone.Views.HomeView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:views="using:GrooveSharkWindowsPhone.Views"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Page.Resources>
        <DataTemplate x:Name="SongTemplate">
            <Grid Height="75">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"></RowDefinition>
                    <RowDefinition Height="*"></RowDefinition>
                    <RowDefinition Height="Auto"></RowDefinition>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                </Grid.ColumnDefinitions>


                <TextBlock Grid.Row="1" Grid.Column="0" Margin="0,5,5,5" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="#888888">
                        <Run Text="{Binding SongPosition}"></Run>
                        <Run Text="."></Run>
                </TextBlock>

                <Image Height="63" Width="63" Grid.Row="1" Grid.Column="1" Margin="5" Source="{Binding ThumbnailUrl}"/>


                <StackPanel Grid.Row="1" Grid.Column="2" Margin="5" VerticalAlignment="Center">

                    <TextBlock  FontSize="16" Text="{Binding SongName}" FontWeight="Bold"></TextBlock>

                    <TextBlock  FontSize="16" TextTrimming="CharacterEllipsis">
                        <Run Text="{Binding ArtistName}"></Run>
                        <Run Text=" • "></Run>
                         <Run Text="{Binding AlbumName}"></Run>
                    </TextBlock>
                </StackPanel>

                <StackPanel Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="2" Margin="0" Height="2" Background="#888888"></StackPanel>
            </Grid>
        </DataTemplate>

        <Style x:Key="ListBoxCustomItemStyle" TargetType="ListBoxItem">
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border x:Name="LayoutRoot" BorderThickness="0" BorderBrush="Black" >
                            <ContentControl x:Name="ContentContainer" 
                                    VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}" 
                                    HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"  
                                    Margin="0"
                                    Content="{TemplateBinding Content}" 
                                    ContentTemplate="{TemplateBinding ContentTemplate}" 
                                    Foreground="{TemplateBinding Foreground}" Background="{ThemeResource GrooveSharkOrangeBrush}" />
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Pressed">
                                    </VisualState>
                                    <VisualState x:Name="Normal">
                                    </VisualState>
                                    <VisualState x:Name="MouseOver" />
                                    <VisualState x:Name="Disabled"/>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="SelectionStates">
                                    <VisualState x:Name="Unselected"/>
                                    <VisualState x:Name="Selected">
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                        </Border>

                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Page.Resources>


    <Pivot Style="{StaticResource GrooveSharkPivotTemplate}">

        <Pivot.TitleTemplate>
            <DataTemplate>
                <Grid Background="{ThemeResource GrooveSharkOrangeBrush}">
                    <Image HorizontalAlignment="Left" Margin="19,38,0,0" Source="/Assets/Images/Logos/Grooveshark_Logo_Horizontal.png" Height="25"></Image>
                </Grid>
            </DataTemplate>
        </Pivot.TitleTemplate>
        <Pivot.HeaderTemplate>
            <DataTemplate>
                <TextBlock Foreground="{ThemeResource PhoneForegroundLightBrush}" Text="{Binding}"></TextBlock>
            </DataTemplate>
        </Pivot.HeaderTemplate>
        <PivotItem Margin="14,20,14,0" Header="Popular songs" DataContext="{Binding PopularSongViewModel}">
            <ListBox ItemsSource="{Binding PopularSongsToday}" ItemTemplate="{StaticResource SongTemplate}" Background="Transparent" ItemContainerStyle="{StaticResource ListBoxCustomItemStyle}">
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel></StackPanel>
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
            </ListBox>
        </PivotItem>
        <PivotItem Margin="14,20,14,0" Header="Search">
            <StackPanel>
                <TextBox PlaceholderText="Search for songs, artists or playlists" ></TextBox>
            </StackPanel>
        </PivotItem>
    </Pivot>

    <Page.BottomAppBar>
        <CommandBar Background="{ThemeResource GrooveSharkOrangeBrush}" ClosedDisplayMode="Minimal">
            <CommandBar.SecondaryCommands>
                <AppBarButton Label="Settings" Command="{Binding NavigateToSettingsCommand}">
                </AppBarButton>
            </CommandBar.SecondaryCommands>
        </CommandBar>
    </Page.BottomAppBar>
</views:BaseView>
